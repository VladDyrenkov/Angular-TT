"use strict";(self.webpackChunkAngularApp=self.webpackChunkAngularApp||[]).push([[989],{8989:(H,u,s)=>{s.r(u),s.d(u,{CategoryModule:()=>N});var d=s(1196),C=s(8306),x=s(4742),D=s(8421),b=s(7669),Z=s(5403),O=s(3268),A=s(1810),e=s(1223),f=s(7579),m=s(520);let T=(()=>{class i{constructor(t){this.http=t,this.dishFromDb$=new f.x,this.dishes=[]}loadDishes(){return this.http.get("http://localhost:3000/dish")}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(m.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),S=(()=>{class i{constructor(t){this.http=t,this.uploadingCategories$=new f.x}loadCategories(){return this.http.get("http://localhost:3000/category")}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(m.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var g=s(9808);class k{constructor(o){this.name=o.name,this.price=o.price,this.id=o.id,this.category=o.category,this.image=o.image,this.count=1,this.totalPrice=0}}var w=s(1321),P=s(7947);let F=(()=>{class i{constructor(t){this.basketService=t,this.dialogButton=new e.vpe,this.isHide=!0}set selectedDishLink(t){this.selectedDish=new k(t?JSON.parse(JSON.stringify(t)):{})}confirm(){this.selectedDish.count&&this.basketService.saveDish(this.selectedDish),this.hideDialog()}hideDialog(){this.selectedDish.count=1,this.isHide=!0}showDialog(){this.isHide=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w.v))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-dialog-selected-dish"]],inputs:{selectedDishLink:"selectedDishLink"},outputs:{dialogButton:"dialogButton"},decls:16,vars:8,consts:[[1,"dialog__bacground",3,"click"],[1,"dialog"],["tabindex","-1",1,"dialog__container"],[1,"dialog__block"],[1,"dialog__dish"],[1,"dialog__dish__image",3,"src"],[1,"dialog__dish__name"],[1,"dialog__dish__price"],[3,"count","countChange"],[1,"dialog__btn__container"],[1,"dialog__btn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return n.hideDialog()}),e.qZA(),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e._UZ(5,"img",5),e.TgZ(6,"div",6),e._uU(7),e.qZA(),e.TgZ(8,"div",7),e._uU(9),e.qZA(),e.TgZ(10,"app-counter",8),e.NdJ("countChange",function(c){return n.selectedDish.count=c}),e.qZA(),e.TgZ(11,"div",9),e.TgZ(12,"button",10),e.NdJ("click",function(){return n.hideDialog()}),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",10),e.NdJ("click",function(){return n.confirm()}),e._uU(15,"Confirm"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.ekj("hideStyle",n.isHide),e.xp6(1),e.ekj("hideStyle",n.isHide),e.xp6(4),e.Q6J("src",n.selectedDish.image,e.LSH),e.xp6(2),e.Oqu(n.selectedDish.name),e.xp6(2),e.Oqu(n.selectedDish.price),e.xp6(1),e.Q6J("count",n.selectedDish.count))},directives:[P.A],styles:[".dialog[_ngcontent-%COMP%]{position:absolute;top:50%;right:50%;transform:translate(50%) translateY(-60%)}.dialog__bacground[_ngcontent-%COMP%]{width:100vw;height:100vh;background-color:#8680804d;position:absolute;top:0;right:0}.dialog__container[_ngcontent-%COMP%]{top:50%;right:0;display:flex;justify-content:center;align-items:center}.dialog__message[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase;font-weight:700;font-size:32px}.dialog__btn[_ngcontent-%COMP%]{width:100px;height:40px;border:solid 2px #979AB1;border-radius:8px;transition:all .3s;font-size:24px;font-weight:700;background-color:#342e3d;color:#eaecf6}.dialog__btn[_ngcontent-%COMP%]:hover{background-color:#666276;color:#eaecf6;border:solid 2px #342E3D}.dialog__btn__container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:space-evenly;margin-bottom:8px}.dialog__dish[_ngcontent-%COMP%]{border:solid #ccc 3px;background-color:#c0c3d3;border-radius:32px;display:flex;align-items:center;flex-direction:column}.dialog__dish__image[_ngcontent-%COMP%]{height:200px;width:280px;border-radius:32px}.hideStyle[_ngcontent-%COMP%]{display:none}"]}),i})();const U=["dishDialog"];function J(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"div",5),e._UZ(2,"img",6),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.TgZ(5,"div",8),e._uU(6),e.qZA(),e.TgZ(7,"button",9),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw().selectDish(c)}),e._uU(8,"Add"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(2),e.Q6J("src",t.image,e.LSH),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.price)}}let z=(()=>{class i{constructor(){this.dishes=[]}selectDish(t){this.selectedDish=t,this.dialog.showDialog()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-category-dishes"]],viewQuery:function(t,n){if(1&t&&e.Gf(U,5),2&t){let r;e.iGM(r=e.CRH())&&(n.dialog=r.first)}},inputs:{dishes:"dishes"},decls:4,vars:2,consts:[[1,"container"],["class","item",4,"ngFor","ngForOf"],[3,"selectedDishLink"],["dishDialog",""],[1,"item"],[1,"dish"],[1,"dish__image",3,"src"],[1,"dish__name"],[1,"dish__price"],[1,"dish__btn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,J,9,3,"div",1),e.qZA(),e._UZ(2,"app-dialog-selected-dish",2,3)),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.dishes),e.xp6(1),e.Q6J("selectedDishLink",n.selectedDish))},directives:[g.sg,F],styles:[".dish[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-around;width:300px;height:500px;border:solid black 2px;border-radius:20px}.dish__image[_ngcontent-%COMP%]{height:200px;width:280px;border-radius:25px}.dish__name[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:700;font-size:32px;text-align:center}.dish__btn[_ngcontent-%COMP%]{width:160px;height:70px;background-color:#fff;color:#0075ff;font-weight:600;font-size:24px;border:solid 2px #0075ff;border-radius:20px;transition:all .3s;cursor:pointer}.dish__btn[_ngcontent-%COMP%]:hover{background-color:#0075ff;color:#fff}.item[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:10px}.container[_ngcontent-%COMP%]{height:calc(100vh - 150px);width:calc(100vw - 220px);overflow-y:scroll;display:flex;justify-content:center;flex-direction:row;flex-wrap:wrap}.container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#aaaaaa}.container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}"]}),i})();function j(i,o){if(1&i&&(e.TgZ(0,"div",4),e.TgZ(1,"div",5),e.TgZ(2,"p"),e._uU(3),e.qZA(),e.qZA(),e._UZ(4,"button",6),e.qZA()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Jzz("background-image: url(",t.image,");"),e.Q6J("routerLink","/categories/"+t.url)}}let _=(()=>{class i{constructor(t,n,r){this.route=t,this.dishesService=n,this.categoryService=r,this.categories=[],this.dishes=[],this.filtredDishes=[],this.subscriptionRout=t.params.subscribe(c=>{this.categoryUrl=c.catUrl,this.fileredDish()})}ngOnInit(){this.subscription=function(...i){const o=(0,b.jO)(i),{args:t,keys:n}=(0,x.D)(i),r=new C.y(c=>{const{length:a}=t;if(!a)return void c.complete();const h=new Array(a);let y=a,v=a;for(let l=0;l<a;l++){let p=!1;(0,D.Xf)(t[l]).subscribe(new Z.Q(c,Q=>{p||(p=!0,v--),h[l]=Q},()=>y--,void 0,()=>{(!y||!p)&&(v||c.next(n?(0,A.n)(n,h):h),c.complete())}))}});return o?r.pipe((0,O.Z)(o)):r}([this.categoryService.loadCategories(),this.dishesService.loadDishes()]).subscribe(([t,n])=>{this.categories=[...t],this.dishes=[...n],this.fileredDish()}),this.categoryUrl=this.route.snapshot.params.catUrl,this.fileredDish()}ngOnDestroy(){this.subscriptionRout.unsubscribe()}fileredDish(){var t;const n=(null===(t=this.categories.find(r=>r.url===this.categoryUrl))||void 0===t?void 0:t.id)||"";this.filtredDishes=this.dishes.filter(r=>r.category.includes(n))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.gz),e.Y36(T),e.Y36(S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-category"]],decls:4,vars:2,consts:[[1,"main"],[1,"list"],["class","item",4,"ngFor","ngForOf"],[3,"dishes"],[1,"item"],[1,"category__name"],[1,"category__button",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,j,5,5,"div",2),e.qZA(),e._UZ(3,"app-category-dishes",3),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngForOf",n.categories),e.xp6(1),e.Q6J("dishes",n.filtredDishes))},directives:[g.sg,z,d.rH],styles:[".category[_ngcontent-%COMP%]{display:flex}.category__button[_ngcontent-%COMP%]{width:180px;height:100px;margin-bottom:10px;background-size:cover;font-size:16px;cursor:pointer}.category__name[_ngcontent-%COMP%]{font-size:18px;font-weight:700;text-transform:uppercase;margin-top:8px}.list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;height:310px;margin-top:160px;width:200px;margin-left:40px}.main[_ngcontent-%COMP%]{display:flex;flex-direction:row}"]}),i})();var q=s(1416);const L=[{path:"",component:_},{path:":catUrl",component:_}];let N=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[],imports:[[d.Bz.forChild(L),g.ez,q.m]]}),i})()}}]);